//////////////////////////////////////////////////////////////////////////////////////////////
// DO NOT MODIFY THIS FILE                                                                  //
// This file is automatically generated by ZenStack CLI and should not be manually updated. //
//////////////////////////////////////////////////////////////////////////////////////////////

datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL")
  directUrl = env("DIRECT_URL")
}

generator client {
  provider = "prisma-client-js"
}

/// @@allow('read', true)
model Subject {
  id         String   @id()
  courses    Course[]
  created_at DateTime @default(now())
}

/// @@allow('read', true)
model Course {
  title            String
  code             Int
  description      String
  Subject          Subject              @relation(fields: [subjectId], references: [id], onDelete: Cascade)
  created_at       DateTime             @default(now())
  subjectId        String
  prerequisiteText String?
  prerequisites    CoursePrerequisite[] @relation("CourseToPrerequisite")
  prerequisiteFor  CoursePrerequisite[] @relation("PrerequisiteToCourse")
  corequisite      String[]
  credits          Int

  @@id([title, code])
}

/// @@allow('read', true)
model CoursePrerequisite {
  course       Course @relation("CourseToPrerequisite", fields: [courseTitle, courseCode], references: [title, code])
  courseTitle  String
  courseCode   Int
  prerequisite Course @relation("PrerequisiteToCourse", fields: [prereqTitle, prereqCode], references: [title, code])
  prereqTitle  String
  prereqCode   Int

  @@id([courseTitle, courseCode, prereqTitle, prereqCode])
}
